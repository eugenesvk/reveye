<html>
<head>
<title>RevEye reverse image search popup</title>

<style type="text/css">
body {
	padding: 5px 0px;
	width: 170px;
	font-family: arial, sans-serif;
	font-size: 12px;
}
#logo {
	float: right;
	padding: 0 0 5px 5px;
}
#save {
	text-align: center;
}
#status {
	background-color: yellow;
	margin: 5px 0px;
}
#options {
	text-align: left;
	padding-left: 5px;
}
#submenu_default {
	text-align: center;
}
#instructions {
	font-size: 12px;
}
</style>

<script type="text/javascript">

function save_options() {
  var service_radio = document.getElementsByName("service");
	var menutype_radio = document.getElementsByName("menutype");
	for(var i = 0; i < menutype_radio.length; i++) {if(menutype_radio[i].checked){localStorage.menutype = menutype_radio[i].value;}}
	
	var service_dropdown = document.getElementsByName("service")[0];
	var selIndex = service_dropdown.selectedIndex;
	localStorage.service = service_dropdown[selIndex].value;
	
	chrome.extension.sendRequest({action:"updateContextMenu"});
	
	var status = document.getElementById("status");
	status.innerHTML = "Options saved.";
	setTimeout(function() { status.innerHTML = ""; }, 800);
	
}

function restore_options() {
	if (!localStorage.menutype){localStorage.menutype = "submenu";}
	var menutype = localStorage.menutype;
	document.getElementById(menutype).checked = true;
	
	document.getElementById("submenu_default").style.display = (document.getElementsByName("menutype")[1].checked ? '' : 'none' );
	
	if (!localStorage.service){localStorage.service = "all";}
	var service = localStorage.service;
	document.getElementById(service).selected = true;
}

function toggle_default_visibility() {
	document.getElementById('submenu_default').style.display = (document.getElementsByName("menutype")[1].checked ? '' : 'none' );
}

</script>
</head>


<img id="logo" src="i/reveye48.png">
<h2>RevEye Options</h2>

<body onload="restore_options()">
<p>Select context menu:</p>
<p id="options">
<input type="radio" id="submenu" name="menutype" value="submenu" onchange="toggle_default_visibility()"><label for="submenu" title="Choose this option if you want to select a search engine on every lookup.">Submenu with all options.</label><br/>
<input type="radio" id="singleoption" name="menutype" value="singleoption" onchange="toggle_default_visibility()"><label for="singleoption" title="Choose this option if you want to use the same configuration for every lookup.">One default search option:</label><div id="submenu_default" name="submenu_default"><select name="service">
<option id="all" value="all">all engines</option>
<option id="tineye" value="tineye">TinEye</option>
<option id="cydral" value="cydral">Cydral</option>
<option id="gazopa" value="gazopa">GazoPa</option>
</select>
</div>



<div id="save">
<div id="status"></div>
<button onclick="save_options()">Save</button> <a href="#" onclick="window.close();">cancel</a>
</div>

<p id="instructions"><b>RevEye Instructions:</b><br/> Use context menu (right click) on any image in a web page.</p>

</body>
</html>
